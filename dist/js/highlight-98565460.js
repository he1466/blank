import{s as h}from"./index-885f6543.js";import{k as g}from"./@vueuse-67b6382f.js";import{r as m,b as B,J as T,E as _,o as a,c,a as p,W as M,M as k,u as r,n as I,aw as x,F as C,a7 as b,S as i,U as E}from"./@vue-c8b849dd.js";import{_ as v,E as D}from"./index-242f51d6.js";function S(){const t=m(0),e=g(function(){t.value=(document.documentElement||document.body).scrollTop},50);return B(()=>{document.addEventListener("scroll",e)}),T(()=>{document.removeEventListener("scroll",e)}),t}const L=["level"],w=_({__name:"menuBarItem",props:{MenuItem:null},setup(t){const e=S();return(n,o)=>(a(),c("div",{class:"o_menu-bar_title",level:t.MenuItem.level},[p("span",{class:k({o_active:r(e)>=t.MenuItem.offset&&r(e)<t.MenuItem.offsetMax})},M(t.MenuItem.title),3)],8,L))}});const F=v(w,[["__scopeId","data-v-ccdd5969"]]);function N(t){const e=m([]);return I(()=>{e.value=f(t)}),x(()=>{e.value=f(t)}),e}function f(t){const e=[];return d(e,document.querySelector(t)),z(e),e}function d(t,e,n){const o=e==null?void 0:e.tagName.toLowerCase();if((e==null?void 0:e.nodeType)==1&&o[0]==="h"){const s={offsetMax:0};s.title=e.textContent+"",s.level=+o[1],s.offset=$(e),s.target=e,t.push(s)}else{if(!e||e.nodeType!=1)return;const s=Array.from(e.children);for(const l of s)d(t,l)}}function $(t){let e=t==null?void 0:t.offsetTop,n=t.offsetParent;for(;n!==null;)e+=n.offsetTop,n=n.offsetParent;return e}function z(t){for(let e=0,n=t.length;e<n;e++)e+1<n?t[e].offsetMax=t[e+1].offset:t[e].offsetMax=1/0}const A={class:"o_menu_title"},P={key:0,class:"o_menu_bar_container"},U=_({__name:"MenuBar",props:{body:null,menuTitle:null,style:null},emits:["MenuBarClick"],setup(t,{emit:e}){const o=N(t.body);function s(l){h(l.offset),e("MenuBarClick",l)}return(l,q)=>(a(),c("div",{class:"o_navigator_menu",style:E(t.style)},[p("h3",A,M(t.menuTitle||"目录"),1),r(o).length?(a(),c("div",P,[(a(!0),c(C,null,b(r(o),(u,y)=>(a(),i(F,{key:y,MenuItem:u,onClick:G=>s(u)},null,8,["MenuItem","onClick"]))),128))])):(a(),i(D,{key:1,title:"暂无标题"}))],4))}});const j=v(U,[["__scopeId","data-v-1da65201"]]);export{j as M};
