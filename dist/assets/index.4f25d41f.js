var d=Object.defineProperty;var g=(e,t,s)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var f=(e,t,s)=>(g(e,typeof t!="symbol"?t+"":t,s),s);import{_ as c,E}from"./jspdf.0b42b4d1.js";import{t as y}from"./config.404183d2.js";import{r as T}from"./element-plus.c24761e2.js";import L from"./html2canvas.4d0ab5af.js";import{s as w,e as D}from"./index.c05953cf.js";const P=(e,t)=>{const s=e[t];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((o,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t)))})};async function V(e){return(await P(Object.assign({"../../templates/business/style.scss":()=>c(()=>Promise.resolve({}),["./style.222df5da.css"],import.meta.url),"../../templates/concise/style.scss":()=>c(()=>Promise.resolve({}),["./style.634f802d.css"],import.meta.url),"../../templates/create/style.scss":()=>c(()=>Promise.resolve({}),["./style.05d652a8.css"],import.meta.url),"../../templates/fresh/style.scss":()=>c(()=>Promise.resolve({}),["./style.cd30444e.css"],import.meta.url),"../../templates/front_end/style.scss":()=>c(()=>Promise.resolve({}),["./style.d6df844f.css"],import.meta.url),"../../templates/general/style.scss":()=>c(()=>Promise.resolve({}),["./style.56249fba.css"],import.meta.url),"../../templates/graduation_reexam/style.scss":()=>c(()=>Promise.resolve({}),["./style.396bad6e.css"],import.meta.url),"../../templates/internet/style.scss":()=>c(()=>Promise.resolve({}),["./style.003f2a87.css"],import.meta.url),"../../templates/internet_avatar/style.scss":()=>c(()=>Promise.resolve({}),["./style.6450a799.css"],import.meta.url),"../../templates/internet_social/style.scss":()=>c(()=>Promise.resolve({}),["./style.a0fb7676.css"],import.meta.url),"../../templates/operation/style.scss":()=>c(()=>Promise.resolve({}),["./style.7b49bb6c.css"],import.meta.url),"../../templates/operation_avatar/style.scss":()=>c(()=>Promise.resolve({}),["./style.38a7cba6.css"],import.meta.url),"../../templates/simple_avatar/style.scss":()=>c(()=>Promise.resolve({}),["./style.7eb98396.css"],import.meta.url)}),`../../templates/${e}/style.scss`)).default}const N=e=>{for(const t of y)if(e===t.type)return t.content;return""},S={h1:{max:30,min:-15,top:0,tag:"",optimal:0},h2:{max:30,min:-15,top:0,tag:"",optimal:0},h3:{max:20,min:-15,top:0,tag:"",optimal:0},h4:{max:20,min:-15,top:0,tag:"",optimal:0},h5:{max:20,min:-15,top:0,tag:"",optimal:0},h6:{max:20,min:-15,top:0,tag:"",optimal:0},li:{max:10,min:-15,top:0,tag:"",optimal:0},p:{max:10,min:-15,top:0,tag:"",optimal:0}},A=(e,t)=>e.optimal>t.optimal,_=(e,t,s)=>[e[t],e[s]]=[e[s],e[t]];class B{constructor(t){f(this,"container",[]);f(this,"cmp",A);this.cmp=t}push(t){const{container:s,cmp:o}=this;s.push(t);let i=s.length-1;for(;i;){const a=Math.floor((i-1)/2);if(!o(s[i],s[a]))return;_(s,i,a),i=a}}pop(){const{container:t,cmp:s}=this;if(!t.length)return null;_(t,0,t.length-1);const o=t.pop(),i=t.length;let a=0,r=a*2+1;for(;r<i;){const n=a*2+2;if(n<i&&s(t[n],t[r])&&(r=n),!s(t[r],t[a]))break;_(t,r,a),a=r,r=a*2+1}return o}top(){return this.container.length?this.container[0]:null}isEmpty(){return this.container.length===0}}function $(){return document.createElement("style")}function k(){return document.createElement("div")}function v(e){return document.head.querySelector(`style[${e}]`)}function H(e){var t;(t=v(e))==null||t.remove()}function q(e,t){const{showLoading:s,closeLoading:o}=O();s("\u6B63\u5728\u5BFC\u51FAPDF \u8BF7\u8010\u5FC3\u7B49\u5F85..."),L(t,{allowTaint:!1,logging:!1,useCORS:!0,scale:4}).then(i=>{var h;const a=new E("p","mm","a4"),r=i.getContext("2d"),n=210,m=297,l=Math.floor(m*i.width/n);let u=0;for(;u<i.height;){const p=document.createElement("canvas");p.width=i.width,p.height=Math.min(l,i.height-u),(h=p.getContext("2d"))==null||h.putImageData(r==null?void 0:r.getImageData(0,u,i.width,Math.min(l,i.height-u)),0,0),a.addImage(p.toDataURL("image/jpeg",1),"JPEG",0,0,n,Math.min(m,n*p.height/p.width)),u+=l,i.height-u>1&&a.addPage()}a.save(`${e}.pdf`),w("PDF\u5BFC\u51FA\u6210\u529F")}).catch(i=>{D("\u5BFC\u51FA\u5931\u8D25, "+i)}).finally(o)}function O(){let e=null;function t(o){e=T.service({lock:!0,text:o,background:"rgba(0, 0, 0, 0.7)"})}function s(){e&&e.close()}return{showLoading:t,closeLoading:s}}function G(e=0){const t=document.documentElement||document.body;let s=Math.abs(t.scrollTop-e)/20,o=0,i=-1;const a=s;function r(){o=t.scrollTop;const n=o-e;i==o||n==0||(i=o,window.requestAnimationFrame(function(){if(s=n>0?a:-a,o-=s,Math.abs(n)<a){t.scrollTop=e;return}t.scrollTop=o,Math.abs(n)>0&&r()}))}r()}function U(e){let t=e==null?void 0:e.offsetTop,s=e==null?void 0:e.offsetParent;for(;s!==null;)t+=s.offsetTop,s=s.offsetParent;return t}function x({node:e,latest:t,uid:s}){var i,a;let o="";if(e.nodeType===Node.ELEMENT_NODE){const r=e.classList,n=e.tagName.toLowerCase();r.contains("flex-layout")?o+=`::: start
`:r.contains("iconfont")?o+=`icon:${r[1].slice(5)} `:r.contains("head-layout")?o+=`::: headStart
`:n==="a"?o+="[":["b","strong"].includes(n)?o+="**":n[0]==="h"?o+="#".repeat(+n[1])+" ":n==="li"?o+=`${((i=e.parentElement)==null?void 0:i.tagName.toLowerCase())=="ul"?"- ":s+". "}`:["td","th"].includes(n)?o+="| ":n==="code"?o+="`":n==="i"&&r[0]!="iconfont"&&(o+="*");const m=e.childNodes;for(let l=0;l<m.length;l++){const u=m[l].nodeType==m[l].ELEMENT_NODE&&((a=m[l].parentElement)==null?void 0:a.tagName.toLowerCase())=="ol";o+=x({node:m[l],latest:l===m.length-1,uid:u?++s:0})}if(r.contains("flex-layout"))o+="::: end";else if(r.contains("head-layout"))o+="::: headEnd";else if(r.contains("flex-layout-item")&&!t)o+=`
:::`;else if(n=="a")o+=`](${e.textContent})`;else if(["b","strong"].includes(n))o+="**";else if(n=="img"){const l=e.alt,u=l==null?void 0:l.includes("\u4E2A\u4EBA\u5934\u50CF");o+=`![${u?"\u4E2A\u4EBA\u5934\u50CF":l}](${e.src})`}else n==="tr"?o+="|":["th","td"].includes(n)?o+=" ":n==="code"?o+="`":n==="i"&&r[0]!="iconfont"&&(o+="*");["b","span","strong","a","i","td","th","thead","code","ul","ol"].includes(n)||(o+=`
`)}else{const r=e.textContent||"";o+=r}return o}export{B as H,$ as a,k as b,U as c,q as d,x as e,N as g,V as i,S as o,v as q,H as r,G as s};
