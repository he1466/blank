import{k as j,m as J,f as Y,d as Z,r as ee,e as te}from"./element-plus-5b013558.js";import{u as oe,U as K,n as w,H as se,B as ne}from"./browseHistory-3c0d87eb.js";import{i as W,e as B,w as ie,u as U,s as ae,_ as L,N as ce,p as re,E as le}from"./index-242f51d6.js";import{u as ue}from"./vue-router-059fda26.js";import{l as de,r as me,q as H}from"./community-7138e1b3.js";import{r as S,j as _e,E,h as V,o as c,c as m,P as p,a as o,W as k,u as e,F as z,a7 as Q,S as M,X as x,M as pe,V as C,R as P,au as X,av as G,K as fe,aw as ve,_ as ye}from"./@vue-c8b849dd.js";import{_ as F}from"./wechat-b2874294.js";import{e as O}from"./@vueuse-67b6382f.js";import"./lodash-es-742d3967.js";import"./async-validator-8a4f889d.js";import"./@element-plus-6e6d71a8.js";import"./dayjs-e78a62a1.js";import"./aos-17f8bee5.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./pinia-9e5c94d8.js";import"./picture-verification-code-aba23b74.js";import"./nprogress-8660dfbd.js";function he(t,a,s){const r=ue();async function n(){if(!W()){B("请先登录！");return}if(s.value){ie("你已经赞过了，不用重复点～");return}const{userInfo:_}=U();await de({userId:_.uid,articleId:t.value}),a("reQueryList",_.uid)}function i(_){const{setBrowseHistory:g}=oe();g(_),r.push(`/community/detail?articleId=${t.value}`)}async function h(){const _=await me({articleId:t.value});_.code==200&&(ae(_.msg),a("remove"))}function v(){r.push(`/community/editor?articleId=${t.value}`)}return{useLike:n,useDetail:i,useRemove:h,useEditor:v}}function ge(t){const a=S([]);return _e(()=>{const s=[];t.value.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,(r,n)=>(s.length<3&&s.push(n),n)),a.value=s}),{covers:a}}const N=t=>(X("data-v-fecaa59a"),t=t(),G(),t),ke={class:"pointer"},be={key:0,class:"covers-container"},$e={class:"article-bottom"},we={class:"operator-group"},Ce=N(()=>o("i",{class:"iconfont icon-like font-20"},null,-1)),Ie=N(()=>o("i",{class:"iconfont icon-comment font-20"},null,-1)),Se=N(()=>o("i",{class:"iconfont icon-edit font-20"},null,-1)),xe=N(()=>o("i",{class:"iconfont icon-delete font-20"},null,-1)),Le={class:"visit-people"},Ee=N(()=>o("i",{class:"iconfont icon-browse font-20"},null,-1)),Ne=E({__name:"card",props:{article:null},emits:["reQueryList","queryProfessional","remove"],setup(t,{emit:a}){const s=t,r=V(()=>s.article.likes.includes(_.uid)),n=V(()=>_.uid==s.article.authorId),i=V(()=>s.article.articleId),h=V(()=>s.article.content),{covers:v}=ge(h),{userInfo:_}=U(),{useLike:g,useRemove:$,useDetail:b,useEditor:l}=he(i,a,r);return(y,u)=>{const q=j,R=J;return c(),m("article",ke,[p(K,{"user-info":t.article.authorInfo,"publish-time":t.article.createTime},null,8,["user-info","publish-time"]),o("h3",{onClick:u[0]||(u[0]=f=>e(b)(t.article))},k(t.article.title),1),o("p",{class:"intro line-4",onClick:u[1]||(u[1]=f=>e(b)(t.article))},k(t.article.introduce),1),e(v).length?(c(),m("div",be,[(c(!0),m(z,null,Q(e(v),(f,d)=>(c(),M(q,{key:d,src:f,"preview-src-list":e(v),"initial-index":d,fit:"cover",lazy:!0,loading:"lazy",class:"mr-10 cover-item","preview-teleported":!0,"hide-on-click-modal":!0},null,8,["src","preview-src-list","initial-index"]))),128))])):x("",!0),o("div",$e,[o("div",we,[o("span",{onClick:u[2]||(u[2]=(...f)=>e(g)&&e(g)(...f)),class:pe({clicked:e(r)})},[Ce,C(" "+k(e(w)(t.article.likes.length)),1)],2),o("span",{onClick:u[3]||(u[3]=f=>e(b)(t.article))},[Ie,C(" "+k(e(w)(t.article.commentTotal)),1)]),e(n)?(c(),m("span",{key:0,onClick:u[4]||(u[4]=(...f)=>e(l)&&e(l)(...f))},[p(R,{placement:"bottom",content:"编辑"},{default:P(()=>[Se]),_:1})])):x("",!0),e(n)?(c(),m("span",{key:1,onClick:u[5]||(u[5]=(...f)=>e($)&&e($)(...f))},[p(R,{placement:"bottom",content:"删除"},{default:P(()=>[xe]),_:1})])):x("",!0),o("span",Le,[Ee,C(" 浏览量 "+k(e(w)(t.article.hot)),1)])]),o("span",{class:"tag pointer",onClick:u[6]||(u[6]=f=>y.$emit("queryProfessional",t.article.professional))},"#"+k(t.article.professional),1)])])}}});const Re=L(Ne,[["__scopeId","data-v-fecaa59a"]]),I=t=>(X("data-v-1ec7df0f"),t=t(),G(),t),Te={class:"pointer"},Ve=I(()=>o("h3",null,"《关于社区暂时停止服务的公告》",-1)),Be=I(()=>o("p",{class:"intro line-4"}," 各位兄弟姐妹，之前的服务器已经到期了，所以社区暂时就不提供了，但是数据都是在的，以后恢复正常之后账号都是可以正常使用的！简历服务也是可以正常使用的，别说我跑路了😅！有问题或者有更好的建议可以联系我的微信，也欢迎更多志同道合的朋友一起来维护这个项目！ ",-1)),qe={class:"covers-container"},ze={class:"article-bottom"},Qe={class:"operator-group"},Me=I(()=>o("i",{class:"iconfont icon-like font-20"},null,-1)),Pe=I(()=>o("i",{class:"iconfont icon-comment font-20"},null,-1)),Ae={class:"visit-people"},Ue=I(()=>o("i",{class:"iconfont icon-browse font-20"},null,-1)),De=I(()=>o("span",{class:"tag pointer"},"#社区公告",-1)),He=E({__name:"notice",setup(t){const a={uid:0,nickName:"磊磊磊磊磊",username:"coderlei",sex:"男",professional:"前端开发工程师",graduation:"2023",school:"江西财经大学",avatar:"https://avatars.githubusercontent.com/u/54731221?v=4",origin:"江西南昌"};return(s,r)=>{const n=K,i=j;return c(),m("article",Te,[p(n,{"user-info":a}),Ve,Be,o("div",qe,[p(i,{src:e(F),"preview-src-list":[e(F)],"initial-index":0,fit:"cover",lazy:!0,loading:"lazy",class:"mr-10 cover-item","preview-teleported":!0,"hide-on-click-modal":!0},null,8,["src","preview-src-list"])]),o("div",ze,[o("div",Qe,[o("span",null,[Me,C(" "+k(e(w)(99999)),1)]),o("span",null,[Pe,C(" "+k(e(w)(99999)),1)]),o("span",Ae,[Ue,C(" 浏览量 "+k(e(w)(99999)),1)])]),De])])}}});const Fe=L(He,[["__scopeId","data-v-1ec7df0f"]]),A=["推荐","最新","我的"];function Oe(t,a){const s=S(A[0]);function r(n){s.value=A[n],t.tab=n,t.pageNum=1,a()}return{tab:s,toggleTab:r}}function je(){const{userInfo:t,loginModelToggle:a}=U(),s=S([]),r=S(!1),n=S(!1),i=fe({pageNum:1,pageSize:10,keyword:"",professional:"",tab:0,uid:t.uid});async function h(){if(n.value)return;r.value=!0,i.pageNum+=1;const l=await H(i);if(l.code!=200)return B(l.msg);r.value=!1,s.value.push(...l.data),l.data.length<i.pageSize&&(n.value=!0)}async function v(){if(i.tab==2){if(!W()){B("请先登录再查看。"),a();return}i.uid=t.uid}r.value=!0;const l=await H(i);if(l.code!=200)return B(l.msg);r.value=!1,s.value=l.data,s.value.length<i.pageSize&&(n.value=!0)}function _(l){l!=i.professional&&(i.professional=l,v())}function g(l){s.value.splice(l,1)}function $(){i.pageNum=1,i.keyword="",i.professional="",v()}function b(){i.pageNum=1,v()}return{data:s,loading:r,noMore:n,conditions:i,resetSub:O($,1e3),searchSub:O(b,1e3),queryList:h,queryProfessional:_,removeArticle:g,conditionQuery:v}}const Ke={class:"community-list content-card"},We={class:"menubar flex"},Xe={key:0,class:"article-list"},Ge={key:0},Je={key:1},Ye={key:1},Ze=E({__name:"communityLeft",setup(t){const{data:a,loading:s,noMore:r,conditions:n,resetSub:i,searchSub:h,queryList:v,queryProfessional:_,conditionQuery:g,removeArticle:$}=je(),{toggleTab:b}=Oe(n,g);return ve(()=>{g()}),(l,y)=>{const u=te,q=Y,R=Z,f=ee;return c(),m("div",Ke,[o("div",We,[p(ce,{tabs:e(A),onTabClick:e(b)},null,8,["tabs","onTabClick"]),o("div",null,[p(q,{placeholder:"岗位方向",modelValue:e(n).professional,"onUpdate:modelValue":y[0]||(y[0]=d=>e(n).professional=d),onChange:e(h),class:"mr-10"},{default:P(()=>[(c(!0),m(z,null,Q(e(re),(d,T)=>(c(),M(u,{key:T,label:d,value:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),p(R,{modelValue:e(n).keyword,"onUpdate:modelValue":y[1]||(y[1]=d=>e(n).keyword=d),placeholder:"搜索面经",class:"mr-10",style:{width:"190px"}},null,8,["modelValue"]),o("button",{onClick:y[2]||(y[2]=(...d)=>e(h)&&e(h)(...d)),class:"btn primary"},"搜索"),o("button",{onClick:y[3]||(y[3]=(...d)=>e(i)&&e(i)(...d)),class:"btn plain"},"重置")])]),e(a).length?ye((c(),m("div",Xe,[(c(!0),m(z,null,Q(e(a),(d,T)=>(c(),M(Re,{key:T,onQueryProfessional:e(_),onReQueryList:D=>d.likes.push(D),onRemove:D=>e($)(T),article:d},null,8,["onQueryProfessional","onReQueryList","onRemove","article"]))),128)),e(s)?(c(),m("p",Ge,"正在加载..")):x("",!0),e(r)?(c(),m("p",Je,"暂时没有更多了～")):x("",!0)])),[[f,e(v)]]):(c(),m("div",Ye,[p(Fe),p(le,{title:"还没有人发布面经，你来做第一个吧～"})]))])}}});const et=L(Ze,[["__scopeId","data-v-dc8657a4"]]),tt={class:"community-slider"},ot=E({__name:"communityRight",setup(t){return(a,s)=>(c(),m("div",tt,[p(se),p(ne)]))}});const st=L(ot,[["__scopeId","data-v-186e1253"]]),nt={class:"community","data-aos":"fade-right"},it={class:"community-left-list"},at={class:"community-right-slider"},ct=E({__name:"community",setup(t){return(a,s)=>(c(),m("div",nt,[o("div",it,[p(et)]),o("div",at,[p(st)])]))}});const St=L(ct,[["__scopeId","data-v-f55d82e4"]]);export{St as default};
